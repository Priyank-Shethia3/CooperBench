diff --git a/tests/test_shell_completion.py b/tests/test_shell_completion.py
index 3e7a2bd..daf0e71 100644
--- a/tests/test_shell_completion.py
+++ b/tests/test_shell_completion.py
@@ -414,3 +414,134 @@ def test_add_completion_class_decorator():
     # Using `add_completion_class` as a decorator adds the new shell immediately
     assert "mysh" in click.shell_completion._available_shells
     assert click.shell_completion._available_shells["mysh"] is MyshComplete
+
+
+def test_context_max_resources():
+    """Test max_resources parameter limits resource registration."""
+    from contextlib import contextmanager
+
+    import click
+
+    @contextmanager
+    def dummy_resource():
+        yield "resource"
+
+    # Test with no limit (default)
+    ctx = click.Context(click.Command("test"))
+    for _ in range(10):
+        ctx.with_resource(dummy_resource())
+
+    # Test with limit of 3
+    ctx = click.Context(click.Command("test"), max_resources=3)
+    for _ in range(3):
+        ctx.with_resource(dummy_resource())
+
+    # Should raise RuntimeError when exceeding limit
+    with pytest.raises(
+        RuntimeError
+    ):
+        ctx.with_resource(dummy_resource())
+
+
+def test_context_max_resources_inheritance():
+    """Test max_resources parameter is inherited from parent context."""
+    from contextlib import contextmanager
+
+    import click
+
+    @contextmanager
+    def dummy_resource():
+        yield "resource"
+
+    # Parent context with limit
+    parent_ctx = click.Context(click.Command("parent"), max_resources=2)
+    parent_ctx.with_resource(dummy_resource())
+
+    # Child context should inherit the limit
+    child_ctx = click.Context(click.Command("child"), parent=parent_ctx)
+    child_ctx.with_resource(dummy_resource())
+
+    # Should fail on next resource registration
+    with pytest.raises(
+        RuntimeError
+    ):
+        child_ctx.with_resource(dummy_resource())
+
+
+def test_context_max_resources_reset_on_close():
+    """Test resource count is reset when context is closed."""
+    from contextlib import contextmanager
+
+    import click
+
+    @contextmanager
+    def dummy_resource():
+        yield "resource"
+
+    ctx = click.Context(click.Command("test"), max_resources=2)
+    ctx.with_resource(dummy_resource())
+    ctx.with_resource(dummy_resource())
+
+    # Should fail to add more resources
+    with pytest.raises(RuntimeError):
+        ctx.with_resource(dummy_resource())
+
+    # After closing, resource count should reset
+    ctx.close()
+
+    # Should be able to add resources again
+    ctx.with_resource(dummy_resource())
+    ctx.with_resource(dummy_resource())
+
+
+def test_context_max_resources_edge_cases():
+    """Test edge cases for max_resources parameter."""
+    from contextlib import contextmanager
+
+    import click
+
+    @contextmanager
+    def dummy_resource():
+        yield "resource"
+
+    # Test with limit of 0
+    ctx = click.Context(click.Command("test"), max_resources=0)
+    with pytest.raises(
+        RuntimeError
+    ):
+        ctx.with_resource(dummy_resource())
+
+
+def test_context_max_resources_integration():
+    """Test max_resources with real context manager usage."""
+    from contextlib import contextmanager
+
+    import click
+
+    # Track resource lifecycle without printing to stdout
+    resource_log = []
+
+    @contextmanager
+    def file_resource(name):
+        resource_log.append(f"Opening {name}")
+        try:
+            yield name
+        finally:
+            resource_log.append(f"Closing {name}")
+
+    ctx = click.Context(click.Command("test"), max_resources=2)
+
+    # Successfully register 2 resources
+    file1 = ctx.with_resource(file_resource("file1.txt"))
+    file2 = ctx.with_resource(file_resource("file2.txt"))
+
+    assert file1 == "file1.txt"
+    assert file2 == "file2.txt"
+ 
+    # Verify resources were opened
+    assert "Opening file1.txt" in resource_log
+    assert "Opening file2.txt" in resource_log
+
+    # Third resource should fail
+    with pytest.raises(RuntimeError):
+        ctx.with_resource(file_resource("file3.txt"))
