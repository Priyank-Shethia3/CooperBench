diff --git a/tests/test_context.py b/tests/test_context.py
index 5bd618b..7dc5b2b 100644
--- a/tests/test_context.py
+++ b/tests/test_context.py
@@ -1,5 +1,7 @@
 import logging
+import time
 from contextlib import contextmanager
+from unittest.mock import patch
 
 import pytest
 
@@ -543,3 +545,166 @@ def test_propagate_opt_prefixes():
     ctx = click.Context(click.Command("test2"), parent=parent)
 
     assert ctx._opt_prefixes == {"-", "--", "!"}
+
+
+def test_cleanup_timeout_set():
+    """Test setting cleanup_timeout explicitly."""
+    ctx = click.Context(click.Command("test"))
+    assert ctx.cleanup_timeout is None
+
+    ctx = click.Context(click.Command("test"), cleanup_timeout=5.0)
+    assert ctx.cleanup_timeout == 5.0
+
+
+def test_cleanup_timeout_no_timeout():
+    """Test normal cleanup without timeout (legacy behavior)."""
+    ctx = click.Context(click.Command("test"))
+    cleanup_calls = []
+
+    def cleanup():
+        time.sleep(1.0)
+        cleanup_calls.append("called")
+
+    ctx.call_on_close(cleanup)
+    ctx.close()
+
+    assert cleanup_calls == ["called"]
+
+
+def test_cleanup_timeout_fast_cleanup():
+    """Test cleanup that completes within timeout."""
+    ctx = click.Context(click.Command("test"), cleanup_timeout=1.0)
+    cleanup_calls = []
+
+    def fast_cleanup():
+        cleanup_calls.append("fast")
+
+    ctx.call_on_close(fast_cleanup)
+
+    start = time.time()
+    ctx.close()
+    duration = time.time() - start
+
+    assert cleanup_calls == ["fast"]
+    assert duration < 0.5  # Should be much faster than timeout
+
+
+def test_cleanup_timeout_slow_cleanup():
+    """Test cleanup that exceeds timeout."""
+    ctx = click.Context(click.Command("test"), cleanup_timeout=0.1)
+    cleanup_calls = []
+
+    def slow_cleanup():
+        cleanup_calls.append("started")
+        time.sleep(0.3)  # Longer than timeout
+        cleanup_calls.append("finished")  # May not reach this
+
+    ctx.call_on_close(slow_cleanup)
+
+    with patch("click.core.echo") as mock_echo:
+        start = time.time()
+        ctx.close()
+        duration = time.time() - start
+
+        # Should timeout around 0.1 seconds
+        assert duration < 0.25
+        assert cleanup_calls == ["started"]  # Should have started but not finished
+
+        # Should have logged timeout warning
+        mock_echo.assert_called_once()
+
+
+def test_cleanup_timeout_exception_propagation():
+    """Test that exceptions in fast cleanup are propagated."""
+    ctx = click.Context(click.Command("test"), cleanup_timeout=1.0)
+
+    def failing_cleanup():
+        raise ValueError("Test error")
+
+    ctx.call_on_close(failing_cleanup)
+
+    with pytest.raises(ValueError, match="Test error"):
+        ctx.close()
+
+
+def test_cleanup_timeout_multiple_callbacks():
+    """Test cleanup timeout with multiple callbacks."""
+    ctx = click.Context(click.Command("test"), cleanup_timeout=0.3)
+    results = []
+
+    def cleanup1():
+        results.append("cleanup1")
+        time.sleep(0.05)
+
+    def cleanup2():
+        results.append("cleanup2")
+        time.sleep(0.05)
+
+    def cleanup3():
+        results.append("cleanup3")
+        time.sleep(0.05)
+
+    ctx.call_on_close(cleanup1)
+    ctx.call_on_close(cleanup2)
+    ctx.call_on_close(cleanup3)
+
+    start = time.time()
+    ctx.close()
+    duration = time.time() - start
+
+    # All should complete within timeout
+    assert duration < 0.25
+    assert len(results) == 3
+
+
+def test_cleanup_timeout_with_context_managers():
+    """Test cleanup timeout with context managers."""
+    cleanup_calls = []
+
+    @contextmanager
+    def test_manager():
+        cleanup_calls.append("enter")
+        try:
+            yield "resource"
+        finally:
+            time.sleep(0.05)  # Small delay in cleanup
+            cleanup_calls.append("exit")
+
+    ctx = click.Context(click.Command("test"), cleanup_timeout=1.0)
+
+    with ctx.scope():
+        resource = ctx.with_resource(test_manager())
+        assert resource == "resource"
+        assert cleanup_calls == ["enter"]
+
+    # Should complete cleanup normally
+    assert cleanup_calls == ["enter", "exit"]
+
+
+def test_cleanup_timeout_edge_case_zero():
+    """Test edge case with zero timeout should raise ValueError."""
+    with pytest.raises(ValueError):
+        click.Context(click.Command("test"), cleanup_timeout=0.0)
+
+
+def test_cleanup_timeout_negative():
+    """Test negative timeout should raise ValueError."""
+    with pytest.raises(ValueError):
+        click.Context(click.Command("test"), cleanup_timeout=-1.0)
+
+
+def test_cleanup_timeout_small_valid():
+    """Test very small but valid timeout."""
+    ctx = click.Context(click.Command("test"), cleanup_timeout=0.001)
+    assert ctx.cleanup_timeout == 0.001
+
+    cleanup_calls = []
+
+    def fast_cleanup():
+        cleanup_calls.append("fast")
+
+    ctx.call_on_close(fast_cleanup)
+    ctx.close()
+
+    # Should work with very small timeout for fast operations
+    assert cleanup_calls == ["fast"]
diff --git a/tests/test_shell_completion.py b/tests/test_shell_completion.py
index 3e7a2bd..692c348 100644
--- a/tests/test_shell_completion.py
+++ b/tests/test_shell_completion.py
@@ -1,8 +1,12 @@
+import time
+from unittest.mock import patch
+
 import pytest
 
 import click.shell_completion
 from click.core import Argument
 from click.core import Command
+from click.core import Context
 from click.core import Group
 from click.core import Option
 from click.shell_completion import add_completion_class
