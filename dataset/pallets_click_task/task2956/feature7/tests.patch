diff --git a/tests/test_basic.py b/tests/test_basic.py
index b84ae73..2ae0a1e 100644
--- a/tests/test_basic.py
+++ b/tests/test_basic.py
@@ -652,3 +652,92 @@ def test_help_invalid_default(runner):
     result = runner.invoke(cli, ["--help"])
     assert result.exit_code == 0
     assert "default: not found" in result.output
+
+
+def test_conflicts_with_integration(runner):
+    """Test conflicts_with integration with basic command functionality."""
+
+    @click.command()
+    @click.option(
+        "--format",
+        "-f",
+        type=click.Choice(["json", "xml", "yaml"]),
+        help="Output format",
+    )
+    @click.option(
+        "--json",
+        is_flag=True,
+        conflicts_with=["xml", "yaml"],
+        help="JSON output (conflicts with --xml, --yaml)",
+    )
+    @click.option(
+        "--xml",
+        is_flag=True,
+        conflicts_with=["json", "yaml"],
+        help="XML output (conflicts with --json, --yaml)",
+    )
+    @click.option(
+        "--yaml",
+        is_flag=True,
+        conflicts_with=["json", "xml"],
+        help="YAML output (conflicts with --json, --xml)",
+    )
+    def export_data(format, json, xml, yaml):
+        """Export data in various formats."""
+        output_format = format
+        if json:
+            output_format = "json"
+        elif xml:
+            output_format = "xml"
+        elif yaml:
+            output_format = "yaml"
+        click.echo(f"Exporting in {output_format or 'default'} format")
+
+    # Test help shows conflict information
+    result = runner.invoke(export_data, ["--help"])
+    assert result.exit_code == 0
+    assert "conflicts with" in result.output
+
+    # Test individual options work
+    result = runner.invoke(export_data, ["--json"])
+    assert result.exit_code == 0
+    assert "Exporting in json format" in result.output
+
+    result = runner.invoke(export_data, ["--format", "xml"])
+    assert result.exit_code == 0
+    assert "Exporting in xml format" in result.output
+
+    # Test conflicts are detected
+    result = runner.invoke(export_data, ["--json", "--xml"])
+    assert result.exit_code == 2
+    assert "cannot be used together" in result.output
+
+
+def test_conflicts_with_subcommands(runner):
+    """Test conflicts_with works with subcommands."""
+
+    @click.group()
+    def cli():
+        pass
+
+    @cli.command()
+    @click.option("--verbose", "-v", is_flag=True, conflicts_with=["quiet"])
+    @click.option("--quiet", "-q", is_flag=True, conflicts_with=["verbose"])
+    def process(verbose, quiet):
+        """Process data with verbosity options."""
+        if verbose:
+            click.echo("Verbose processing")
+        elif quiet:
+            click.echo("Quiet processing")
+        else:
+            click.echo("Normal processing")
+
+    # Test subcommand works normally
+    result = runner.invoke(cli, ["process", "--verbose"])
+    assert result.exit_code == 0
+    assert "Verbose processing" in result.output
+
+    # Test conflict detection in subcommand
+    result = runner.invoke(cli, ["process", "--verbose", "--quiet"])
+    assert result.exit_code == 2
+    assert "cannot be used together" in result.output
diff --git a/tests/test_imports.py b/tests/test_imports.py
index e5e5119..14a03a0 100644
--- a/tests/test_imports.py
+++ b/tests/test_imports.py
@@ -50,6 +50,9 @@ ALLOWED_IMPORTS = {
     "types",
     "gettext",
     "shutil",
+    "subprocess",  # Added for auto_complete git branch functionality
+    "pwd",  # Added for auto_complete username functionality
+    "hashlib",  # Added for cache functionality
 }

 if WIN:
diff --git a/tests/test_info_dict.py b/tests/test_info_dict.py
index 20fe68c..6bd8394 100644
--- a/tests/test_info_dict.py
+++ b/tests/test_info_dict.py
@@ -2,6 +2,41 @@ import pytest

 import click.types

+
+def assert_info_dict_superset(actual, expected):
+    """Assert that actual info dict is a superset of expected info dict.
+
+    This allows for additional keys in the actual dict that aren't in expected,
+    which is useful when different feature combinations add different attributes.
+    """
+    def check_superset(actual_item, expected_item, path=""):
+        if isinstance(expected_item, dict):
+            if not isinstance(actual_item, dict):
+                raise AssertionError(f"Expected dict at {path}, got {type(actual_item)}")
+
+            for key, expected_value in expected_item.items():
+                current_path = f"{path}.{key}" if path else key
+                if key not in actual_item:
+                    raise AssertionError(f"Missing key '{key}' at {path}")
+                check_superset(actual_item[key], expected_value, current_path)
+
+        elif isinstance(expected_item, list):
+            if not isinstance(actual_item, list):
+                raise AssertionError(f"Expected list at {path}, got {type(actual_item)}")
+
+            if len(actual_item) != len(expected_item):
+                raise AssertionError(f"List length mismatch at {path}: expected {len(expected_item)}, got {len(actual_item)}")
+
+            for i, (actual_elem, expected_elem) in enumerate(zip(actual_item, expected_item)):
+                check_superset(actual_elem, expected_elem, f"{path}[{i}]")
+
+        else:
+            # For primitive values, they must be equal
+            if actual_item != expected_item:
+                raise AssertionError(f"Value mismatch at {path}: expected {expected_item!r}, got {actual_item!r}")
+
+    check_superset(actual, expected)
+
 # Common (obj, expect) pairs used to construct multiple tests.
 STRING_PARAM_TYPE = (click.STRING, {"param_type": "String", "name": "text"})
 INT_PARAM_TYPE = (click.INT, {"param_type": "Int", "name": "integer"})
@@ -25,6 +60,7 @@ HELP_OPTION = (
         "flag_value": True,
         "count": False,
         "hidden": False,
+        "conflicts_with": [],
     },
 )
 NAME_ARGUMENT = (
@@ -61,6 +97,7 @@ NUMBER_OPTION = (
         "flag_value": None,
         "count": False,
         "hidden": False,
+        "conflicts_with": [],
     },
 )
 HELLO_COMMAND = (
@@ -202,6 +239,7 @@ HELLO_GROUP = (
                 "flag_value": True,
                 "count": False,
                 "hidden": False,
+                "conflicts_with": [],
             },
             id="Flag Option",
         ),
@@ -210,7 +248,7 @@ HELLO_GROUP = (
 )
 def test_parameter(obj, expect):
     out = obj.to_info_dict()
-    assert out == expect
+    assert_info_dict_superset(out, expect)


 @pytest.mark.parametrize(
@@ -252,13 +290,13 @@ def test_parameter(obj, expect):
 def test_command(obj, expect):
     ctx = click.Context(obj)
     out = obj.to_info_dict(ctx)
-    assert out == expect
+    assert_info_dict_superset(out, expect)


 def test_context():
     ctx = click.Context(HELLO_COMMAND[0])
     out = ctx.to_info_dict()
-    assert out == {
+    expected = {
         "command": HELLO_COMMAND[1],
         "info_name": None,
         "allow_extra_args": False,
@@ -266,6 +304,7 @@ def test_context():
         "ignore_unknown_options": False,
         "auto_envvar_prefix": None,
     }
+    assert_info_dict_superset(out, expected)


 def test_paramtype_no_name():
diff --git a/tests/test_options.py b/tests/test_options.py
index 5c30418..35b7d1b 100644
--- a/tests/test_options.py
+++ b/tests/test_options.py
@@ -1139,3 +1139,316 @@ def test_duplicate_names_warning(runner, opts_one, opts_two):
 
     with pytest.warns(UserWarning):
         runner.invoke(cli, [])
+
+
+def test_conflicts_with_basic(runner):
+    """Test basic conflicts_with functionality."""
+
+    @click.command()
+    @click.option("--json", is_flag=True, conflicts_with=["xml"])
+    @click.option("--xml", is_flag=True, conflicts_with=["json"])
+    def cmd(json, xml):
+        if json:
+            click.echo("json")
+        elif xml:
+            click.echo("xml")
+        else:
+            click.echo("none")
+
+    # Test individual options work
+    result = runner.invoke(cmd, ["--json"])
+    assert result.exit_code == 0
+    assert result.output.strip() == "json"
+
+    result = runner.invoke(cmd, ["--xml"])
+    assert result.exit_code == 0
+    assert result.output.strip() == "xml"
+
+    # Test no options work
+    result = runner.invoke(cmd, [])
+    assert result.exit_code == 0
+    assert result.output.strip() == "none"
+
+    # Test conflicts are detected
+    result = runner.invoke(cmd, ["--json", "--xml"])
+    assert result.exit_code == 2
+    assert "cannot be used together" in result.output
+
+
+def test_conflicts_with_multiple_conflicts(runner):
+    """Test conflicts_with with multiple conflicting options."""
+
+    @click.command()
+    @click.option("--json", is_flag=True, conflicts_with=["xml", "yaml"])
+    @click.option("--xml", is_flag=True, conflicts_with=["json", "yaml"])
+    @click.option("--yaml", is_flag=True, conflicts_with=["json", "xml"])
+    def cmd(json, xml, yaml):
+        formats = []
+        if json:
+            formats.append("json")
+        if xml:
+            formats.append("xml")
+        if yaml:
+            formats.append("yaml")
+        click.echo(",".join(formats) if formats else "none")
+
+    # Test each option individually
+    result = runner.invoke(cmd, ["--json"])
+    assert result.exit_code == 0
+    assert result.output.strip() == "json"
+
+    result = runner.invoke(cmd, ["--xml"])
+    assert result.exit_code == 0
+    assert result.output.strip() == "xml"
+
+    result = runner.invoke(cmd, ["--yaml"])
+    assert result.exit_code == 0
+    assert result.output.strip() == "yaml"
+
+    # Test all conflicts
+    result = runner.invoke(cmd, ["--json", "--xml"])
+    assert result.exit_code == 2
+    assert "cannot be used together" in result.output
+
+    result = runner.invoke(cmd, ["--json", "--yaml"])
+    assert result.exit_code == 2
+    assert "cannot be used together" in result.output
+
+    result = runner.invoke(cmd, ["--xml", "--yaml"])
+    assert result.exit_code == 2
+    assert "cannot be used together" in result.output
+
+
+def test_conflicts_with_different_order(runner):
+    """Test that conflicts are detected regardless of argument order."""
+
+    @click.command()
+    @click.option("--verbose", "-v", is_flag=True, conflicts_with=["quiet"])
+    @click.option("--quiet", "-q", is_flag=True, conflicts_with=["verbose"])
+    def cmd(verbose, quiet):
+        if verbose:
+            click.echo("verbose")
+        elif quiet:
+            click.echo("quiet")
+        else:
+            click.echo("normal")
+
+    # Test different orders
+    result = runner.invoke(cmd, ["--verbose", "--quiet"])
+    assert result.exit_code == 2
+    assert "cannot be used together" in result.output
+
+    result = runner.invoke(cmd, ["--quiet", "--verbose"])
+    assert result.exit_code == 2
+    assert "cannot be used together" in result.output
+
+    result = runner.invoke(cmd, ["-v", "-q"])
+    assert result.exit_code == 2
+    assert "cannot be used together" in result.output
+
+    result = runner.invoke(cmd, ["-q", "-v"])
+    assert result.exit_code == 2
+    assert "cannot be used together" in result.output
+
+
+def test_conflicts_with_non_flags(runner):
+    """Test conflicts_with with non-flag options."""
+
+    @click.command()
+    @click.option("--input-file", conflicts_with=["input-text"])
+    @click.option("--input-text", conflicts_with=["input-file"])
+    def cmd(input_file, input_text):
+        if input_file:
+            click.echo(f"file: {input_file}")
+        elif input_text:
+            click.echo(f"text: {input_text}")
+        else:
+            click.echo("no input")
+
+    # Test individual options
+    result = runner.invoke(cmd, ["--input-file", "test.txt"])
+    assert result.exit_code == 0
+    assert result.output.strip() == "file: test.txt"
+
+    result = runner.invoke(cmd, ["--input-text", "hello"])
+    assert result.exit_code == 0
+    assert result.output.strip() == "text: hello"
+
+    # Test conflict
+    result = runner.invoke(cmd, ["--input-file", "test.txt", "--input-text", "hello"])
+    assert result.exit_code == 2
+    assert "cannot be used together" in result.output
+
+
+def test_conflicts_with_default_values(runner):
+    """Test that conflicts are only checked for command line provided values."""
+
+    @click.command()
+    @click.option("--mode-a", is_flag=True, default=False, conflicts_with=["mode-b"])
+    @click.option("--mode-b", is_flag=True, default=True, conflicts_with=["mode-a"])
+    def cmd(mode_a, mode_b):
+        if mode_a:
+            click.echo("mode-a")
+        elif mode_b:
+            click.echo("mode-b")
+        else:
+            click.echo("none")
+
+    # Default should not trigger conflict
+    result = runner.invoke(cmd, [])
+    assert result.exit_code == 0
+    assert result.output.strip() == "mode-b"
+
+    # Explicit command line should trigger conflict
+    result = runner.invoke(cmd, ["--mode-a", "--mode-b"])
+    assert result.exit_code == 2
+    assert "cannot be used together" in result.output
+
+    # Only one from command line should work
+    result = runner.invoke(cmd, ["--mode-a"])
+    assert result.exit_code == 0
+    assert result.output.strip() == "mode-a"
+
+
+def test_conflicts_with_env_variables(runner):
+    """Test that conflicts are only checked for command line, not env vars."""
+
+    @click.command()
+    @click.option("--opt-a", envvar="OPT_A", conflicts_with=["opt-b"])
+    @click.option("--opt-b", envvar="OPT_B", conflicts_with=["opt-a"])
+    def cmd(opt_a, opt_b):
+        if opt_a:
+            click.echo(f"a: {opt_a}")
+        elif opt_b:
+            click.echo(f"b: {opt_b}")
+        else:
+            click.echo("none")
+
+    # Environment variables should not trigger conflicts
+    result = runner.invoke(cmd, [], env={"OPT_A": "value_a", "OPT_B": "value_b"})
+    assert result.exit_code == 0
+    assert "a: value_a" in result.output
+
+    # Command line should still trigger conflicts
+    result = runner.invoke(cmd, ["--opt-a", "val_a", "--opt-b", "val_b"])
+    assert result.exit_code == 2
+    assert "cannot be used together" in result.output
+
+
+def test_conflicts_with_empty_list(runner):
+    """Test that empty conflicts_with list doesn't cause issues."""
+
+    @click.command()
+    @click.option("--test", is_flag=True, conflicts_with=[])
+    def cmd(test):
+        click.echo("ok")
+
+    result = runner.invoke(cmd, ["--test"])
+    assert result.exit_code == 0
+    assert result.output.strip() == "ok"
+
+
+def test_conflicts_with_nonexistent_option(runner):
+    """Test that referencing non-existent options in conflicts_with doesn't crash."""
+
+    @click.command()
+    @click.option("--valid", is_flag=True, conflicts_with=["nonexistent"])
+    def cmd(valid):
+        click.echo("ok")
+
+    result = runner.invoke(cmd, ["--valid"])
+    assert result.exit_code == 0
+    assert result.output.strip() == "ok"
+
+
+def test_conflicts_with_help_info(runner):
+    """Test that conflicts_with information is stored properly."""
+    option = click.Option(["--test"], conflicts_with=["other"])
+    info_dict = option.to_info_dict()
+    assert "conflicts_with" in info_dict
+    assert info_dict["conflicts_with"] == ["other"]
+
+
+def test_conflicts_with_asymmetric(runner):
+    """Test asymmetric conflicts (A conflicts with B but B doesn't conflict with A)."""
+
+    @click.command()
+    @click.option("--strict", is_flag=True, conflicts_with=["legacy"])
+    @click.option("--legacy", is_flag=True)  # No conflicts_with
+    def cmd(strict, legacy):
+        if strict:
+            click.echo("strict")
+        elif legacy:
+            click.echo("legacy")
+        else:
+            click.echo("normal")
+
+    # strict conflicts with legacy
+    result = runner.invoke(cmd, ["--strict", "--legacy"])
+    assert result.exit_code == 2
+    assert "cannot be used together" in result.output
+
+    # But legacy doesn't conflict with strict (order reversed)
+    result = runner.invoke(cmd, ["--legacy", "--strict"])
+    # Should still fail because strict conflicts with legacy
+    assert result.exit_code == 2
+    assert "cannot be used together" in result.output
+
+
+def test_conflicts_with_count_options(runner):
+    """Test conflicts_with with count options."""
+
+    @click.command()
+    @click.option("--verbose", "-v", count=True, conflicts_with=["quiet"])
+    @click.option("--quiet", "-q", is_flag=True, conflicts_with=["verbose"])
+    def cmd(verbose, quiet):
+        if verbose:
+            click.echo(f"verbose: {verbose}")
+        elif quiet:
+            click.echo("quiet")
+        else:
+            click.echo("normal")
+
+    # Single verbose should work
+    result = runner.invoke(cmd, ["-v"])
+    assert result.exit_code == 0
+    assert result.output.strip() == "verbose: 1"
+
+    # Multiple verbose should work
+    result = runner.invoke(cmd, ["-vvv"])
+    assert result.exit_code == 0
+    assert result.output.strip() == "verbose: 3"
+
+    # Conflict should be detected
+    result = runner.invoke(cmd, ["-v", "--quiet"])
+    assert result.exit_code == 2
+    assert "cannot be used together" in result.output
+
+
+def test_conflicts_with_multiple_options(runner):
+    """Test conflicts_with with multiple value options."""
+
+    @click.command()
+    @click.option("--include", multiple=True, conflicts_with=["exclude"])
+    @click.option("--exclude", multiple=True, conflicts_with=["include"])
+    def cmd(include, exclude):
+        if include:
+            click.echo(f"include: {','.join(include)}")
+        elif exclude:
+            click.echo(f"exclude: {','.join(exclude)}")
+        else:
+            click.echo("none")
+
+    # Individual options should work
+    result = runner.invoke(cmd, ["--include", "a", "--include", "b"])
+    assert result.exit_code == 0
+    assert result.output.strip() == "include: a,b"
+
+    result = runner.invoke(cmd, ["--exclude", "x", "--exclude", "y"])
+    assert result.exit_code == 0
+    assert result.output.strip() == "exclude: x,y"
+
+    # Conflicts should be detected
+    result = runner.invoke(cmd, ["--include", "a", "--exclude", "x"])
+    assert result.exit_code == 2
+    assert "cannot be used together" in result.output
