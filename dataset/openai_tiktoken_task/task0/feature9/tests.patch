diff --git a/tests/test_feature9.py b/tests/test_feature9.py
new file mode 100644
index 0000000..93a4f08
--- /dev/null
+++ b/tests/test_feature9.py
@@ -0,0 +1,24 @@
+import pytest
+import tiktoken
+
+def test_token_compression():
+    # Create a simple encoding for testing
+    enc = tiktoken.get_encoding("cl100k_base")
+ 
+    text = " like love hate"
+    tokens = enc.encode(text, compression=True)
+    assert tokens == [1093, 3021, 12491]
+ 
+    text = " like like like"
+    tokens = enc.encode(text, compression=False)
+    assert tokens == [1093, 1093, 1093]
+
+    text = " like like like"
+    tokens = enc.encode(text, compression=True)
+    assert tokens == [1093]
+
+    text = " like love love like like"
+    tokens = enc.encode(text, compression=True)
+    assert tokens == [1093, 3021, 1093]
+
+ 
\ No newline at end of file
