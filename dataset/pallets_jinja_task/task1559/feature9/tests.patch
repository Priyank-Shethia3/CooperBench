diff --git a/tests/test_ext.py b/tests/test_ext.py
index b54e905f..4af71e70 100644
--- a/tests/test_ext.py
+++ b/tests/test_ext.py
@@ -712,3 +712,259 @@ class TestAutoEscape:
         """
         )
         assert tmpl.render(x=42, y=23) == "42|23|99|[1][2][3]|42"
+
+
+class TestTranslationExtractor:
+    def test_basic_extraction_marker(self):
+        from jinja2.ext import TranslationExtractorExtension
+ 
+        env = Environment(extensions=[TranslationExtractorExtension])
+        env.globals['_'] = lambda x: x  # Mock translation function
+        tmpl = env.from_string(
+            '{% extract comment="Login button" %}'
+            '{{ _("Login") }}'
+            '{% endextract %}'
+        )
+        result = tmpl.render()
+        assert result == "Login"
+ 
+        # Check that markers were stored
+        markers = env.extraction_markers()
+        assert len(markers) == 1
+        assert markers[0]['markers']['comment'] == "Login button"
+        assert markers[0]['lineno'] == 1
+
+    def test_multiple_marker_attributes(self):
+        from jinja2.ext import TranslationExtractorExtension
+ 
+        env = Environment(extensions=[TranslationExtractorExtension])
+        env.globals['_'] = lambda x: x  # Mock translation function
+        tmpl = env.from_string(
+            '{% extract comment="Error message", context="authentication", priority="high" %}'
+            '{{ _("Invalid credentials") }}'
+            '{% endextract %}'
+        )
+        result = tmpl.render()
+        assert result == "Invalid credentials"
+ 
+        markers = env.extraction_markers()
+        assert len(markers) == 1
+        marker = markers[0]['markers']
+        assert marker['comment'] == "Error message"
+        assert marker['context'] == "authentication"
+        assert marker['priority'] == "high"
+
+    def test_nested_content(self):
+        from jinja2.ext import TranslationExtractorExtension
+ 
+        env = Environment(extensions=[TranslationExtractorExtension])
+        env.globals['_'] = lambda x: x  # Mock translation function
+        tmpl = env.from_string(
+            '{% extract comment="Welcome message" %}'
+            '<h1>{{ _("Welcome") }}</h1>'
+            '<p>{{ _("Please log in") }}</p>'
+            '{% endextract %}'
+        )
+        result = tmpl.render()
+        assert result == "<h1>Welcome</h1><p>Please log in</p>"
+
+    def test_multiple_extraction_blocks(self):
+        from jinja2.ext import TranslationExtractorExtension
+ 
+        env = Environment(extensions=[TranslationExtractorExtension])
+        env.globals['_'] = lambda x: x  # Mock translation function
+        tmpl = env.from_string(
+            '{% extract comment="Button text" %}'
+            '{{ _("Save") }}'
+            '{% endextract %}'
+            '{% extract comment="Error message", priority="high" %}'
+            '{{ _("File not found") }}'
+            '{% endextract %}'
+        )
+        result = tmpl.render()
+        assert result == "SaveFile not found"
+ 
+        markers = env.extraction_markers()
+        assert len(markers) == 2
+        assert markers[0]['markers']['comment'] == "Button text"
+        assert markers[1]['markers']['comment'] == "Error message"
+        assert markers[1]['markers']['priority'] == "high"
+
+    def test_empty_extraction_block(self):
+        from jinja2.ext import TranslationExtractorExtension
+ 
+        env = Environment(extensions=[TranslationExtractorExtension])
+        tmpl = env.from_string(
+            '{% extract comment="Empty block" %}'
+            '{% endextract %}'
+        )
+        result = tmpl.render()
+        assert result == ""
+ 
+        markers = env.extraction_markers()
+        assert len(markers) == 1
+        assert markers[0]['markers']['comment'] == "Empty block"
+
+    def test_extraction_with_variables(self):
+        from jinja2.ext import TranslationExtractorExtension
+ 
+        env = Environment(extensions=[TranslationExtractorExtension])
+        env.globals['_'] = lambda x: x  # Mock translation function
+        tmpl = env.from_string(
+            '{% extract comment="User greeting" %}'
+            '{{ _("Hello, %(name)s!") % {"name": username} }}'
+            '{% endextract %}'
+        )
+        result = tmpl.render(username="Alice")
+        assert result == "Hello, Alice!"
+
+    def test_extraction_marker_syntax_error(self):
+        from jinja2.ext import TranslationExtractorExtension
+        from jinja2.exceptions import TemplateSyntaxError
+ 
+        env = Environment(extensions=[TranslationExtractorExtension])
+ 
+        # Missing endextract
+        with pytest.raises(TemplateSyntaxError):
+            env.from_string(
+                '{% extract comment="Test" %}'
+                '{{ _("Test") }}'
+            )
+
+    def test_extraction_with_control_structures(self):
+        from jinja2.ext import TranslationExtractorExtension
+ 
+        env = Environment(extensions=[TranslationExtractorExtension])
+        env.globals['_'] = lambda x: x  # Mock translation function
+        tmpl = env.from_string(
+            '{% extract comment="Conditional message" %}'
+            '{% if show_message %}'
+            '{{ _("Message shown") }}'
+            '{% else %}'
+            '{{ _("Message hidden") }}'
+            '{% endif %}'
+            '{% endextract %}'
+        )
+ 
+        result1 = tmpl.render(show_message=True)
+        assert result1 == "Message shown"
+ 
+        result2 = tmpl.render(show_message=False)
+        assert result2 == "Message hidden"
+
+    def test_extraction_marker_line_numbers(self):
+        from jinja2.ext import TranslationExtractorExtension
+ 
+        env = Environment(extensions=[TranslationExtractorExtension])
+        env.globals['_'] = lambda x: x  # Mock translation function
+        tmpl = env.from_string(
+            'Line 1\n'
+            '{% extract comment="First" %}\n'
+            '{{ _("First message") }}\n'
+            '{% endextract %}\n'
+            'Line 5\n'
+            '{% extract comment="Second" %}\n'
+            '{{ _("Second message") }}\n'
+            '{% endextract %}\n'
+        )
+        tmpl.render()
+ 
+        markers = env.extraction_markers()
+        assert len(markers) == 2
+        assert markers[0]['lineno'] == 2
+        assert markers[1]['lineno'] == 6
+
+    def test_extraction_with_complex_expressions(self):
+        from jinja2.ext import TranslationExtractorExtension
+ 
+        env = Environment(extensions=[TranslationExtractorExtension])
+        env.globals['_'] = lambda x: x  # Mock translation function
+        # Test with non-constant expressions in marker attributes
+        tmpl = env.from_string(
+            '{% extract comment=comment_var, priority=priority_level %}'
+            '{{ _("Dynamic message") }}'
+            '{% endextract %}'
+        )
+        result = tmpl.render(comment_var="Dynamic comment", priority_level="medium")
+        assert result == "Dynamic message"
+ 
+        markers = env.extraction_markers()
+        assert len(markers) == 1
+        # Non-constant expressions should be stored as string representations
+        assert "comment_var" in str(markers[0]['markers']['comment'])
+        assert "priority_level" in str(markers[0]['markers']['priority'])
+
+    def test_extraction_marker_integration_with_i18n(self):
+        from jinja2.ext import TranslationExtractorExtension
+ 
+        # Test that extraction markers work alongside i18n extension
+        env = Environment(extensions=["jinja2.ext.i18n", TranslationExtractorExtension])
+        env.install_null_translations()
+ 
+        tmpl = env.from_string(
+            '{% extract comment="Trans block test" %}'
+            '{% trans %}Hello World{% endtrans %}'
+            '{% endextract %}'
+        )
+        result = tmpl.render()
+        assert result == "Hello World"
+
+    def test_extraction_marker_without_attributes(self):
+        from jinja2.ext import TranslationExtractorExtension
+ 
+        env = Environment(extensions=[TranslationExtractorExtension])
+        env.globals['_'] = lambda x: x  # Mock translation function
+        tmpl = env.from_string(
+            '{% extract %}'
+            '{{ _("No attributes") }}'
+            '{% endextract %}'
+        )
+        result = tmpl.render()
+        assert result == "No attributes"
+ 
+        markers = env.extraction_markers()
+        assert len(markers) == 1
+        assert markers[0]['markers'] == {}
+
+    def test_extraction_marker_environment_isolation(self):
+        from jinja2.ext import TranslationExtractorExtension
+ 
+        # Test that different environments have separate marker storage
+        env1 = Environment(extensions=[TranslationExtractorExtension])
+        env2 = Environment(extensions=[TranslationExtractorExtension])
+        env1.globals['_'] = lambda x: x  # Mock translation function
+        env2.globals['_'] = lambda x: x  # Mock translation function
+ 
+        tmpl1 = env1.from_string('{% extract comment="Env1" %}{{ _("Message 1") }}{% endextract %}')
+        tmpl2 = env2.from_string('{% extract comment="Env2" %}{{ _("Message 2") }}{% endextract %}')
+ 
+        tmpl1.render()
+        tmpl2.render()
+ 
+        markers1 = env1.extraction_markers()
+        markers2 = env2.extraction_markers()
+ 
+        assert len(markers1) == 1
+        assert len(markers2) == 1
+        assert markers1[0]['markers']['comment'] == "Env1"
+        assert markers2[0]['markers']['comment'] == "Env2"
+
+    def test_extraction_marker_special_characters(self):
+        from jinja2.ext import TranslationExtractorExtension
+ 
+        env = Environment(extensions=[TranslationExtractorExtension])
+        env.globals['_'] = lambda x: x  # Mock translation function
+ 
+        # Test with special characters in marker values (now specified in feature.md)
+        tmpl = env.from_string(
+            '{% extract comment="Special chars: <>&\\"\'", context="test/context" %}'
+            '{{ _("Test message") }}'
+            '{% endextract %}'
+        )
+        result = tmpl.render()
+        assert result == "Test message"
+ 
+        markers = env.extraction_markers()
+        assert len(markers) == 1
+        assert markers[0]['markers']['comment'] == 'Special chars: <>&"\''
+        assert markers[0]['markers']['context'] == "test/context"
