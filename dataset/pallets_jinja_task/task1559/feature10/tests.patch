diff --git a/tests/test_ext.py b/tests/test_ext.py
index b54e905f..44b98ba1 100644
--- a/tests/test_ext.py
+++ b/tests/test_ext.py
@@ -499,6 +499,122 @@ class TestScope:
         assert tmpl.render(b=3, e=4) == "1|2|2|4|5"
 
 
+class TestTranslationVersionControl:
+    def test_set_and_get_translation_version(self):
+        """Test setting and getting translation versions."""
+        env = Environment(extensions=["jinja2.ext.i18n"])
+        message = "Hello World"
+        version = "1.0"
+ 
+        env.set_translation_version(message, version)
+        assert env.get_translation_version(message) == version
+
+    def test_get_nonexistent_translation_version(self):
+        """Test getting version for non-existent translation."""
+        env = Environment(extensions=["jinja2.ext.i18n"])
+        assert env.get_translation_version("nonexistent") is None
+
+    def test_compare_translation_versions_same(self):
+        """Test comparing versions of same translation strings."""
+        env = Environment(extensions=["jinja2.ext.i18n"])
+        message1 = "Hello World"
+        message2 = "Hello World"
+        version = "1.0"
+ 
+        env.set_translation_version(message1, version)
+        env.set_translation_version(message2, version)
+        assert env.compare_translation_versions(message1, message2) is True
+
+    def test_compare_translation_versions_different(self):
+        """Test comparing versions of different translation strings."""
+        env = Environment(extensions=["jinja2.ext.i18n"])
+        message1 = "Hello World"
+        message2 = "Goodbye World"
+ 
+        env.set_translation_version(message1, "1.0")
+        env.set_translation_version(message2, "2.0")
+        assert env.compare_translation_versions(message1, message2) is False
+
+    def test_compare_translation_versions_unversioned(self):
+        """Test comparing versions when one string is unversioned."""
+        env = Environment(extensions=["jinja2.ext.i18n"])
+        message1 = "Hello World"
+        message2 = "Goodbye World"
+ 
+        env.set_translation_version(message1, "1.0")
+        assert env.compare_translation_versions(message1, message2) is False
+
+    def test_version_control_with_empty_string(self):
+        """Test version control with empty strings."""
+        env = Environment(extensions=["jinja2.ext.i18n"])
+        message = ""
+        version = "1.0"
+ 
+        env.set_translation_version(message, version)
+        assert env.get_translation_version(message) == version
+
+    def test_version_control_with_unicode(self):
+        """Test version control with unicode strings."""
+        env = Environment(extensions=["jinja2.ext.i18n"])
+        message = "H√©llo W√∂rld üåç"
+        version = "1.0"
+ 
+        env.set_translation_version(message, version)
+        assert env.get_translation_version(message) == version
+
+    def test_version_control_with_long_string(self):
+        """Test version control with very long strings."""
+        env = Environment(extensions=["jinja2.ext.i18n"])
+        message = "A" * 10000
+        version = "1.0"
+ 
+        env.set_translation_version(message, version)
+        assert env.get_translation_version(message) == version
+
+    def test_version_update(self):
+        """Test updating version of existing translation."""
+        env = Environment(extensions=["jinja2.ext.i18n"])
+        message = "Hello World"
+ 
+        env.set_translation_version(message, "1.0")
+        assert env.get_translation_version(message) == "1.0"
+ 
+        env.set_translation_version(message, "2.0")
+        assert env.get_translation_version(message) == "2.0"
+
+    def test_version_control_multiple_messages(self):
+        """Test version control with multiple different messages."""
+        env = Environment(extensions=["jinja2.ext.i18n"])
+        messages = ["Hello", "World", "Foo", "Bar"]
+        versions = ["1.0", "1.1", "2.0", "2.1"]
+ 
+        for msg, ver in zip(messages, versions):
+            env.set_translation_version(msg, ver)
+ 
+        for msg, ver in zip(messages, versions):
+            assert env.get_translation_version(msg) == ver
+
+    def test_version_control_hash_collision_resistance(self):
+        """Test that different strings don't collide in version storage."""
+        env = Environment(extensions=["jinja2.ext.i18n"])
+ 
+        # These strings are different but could potentially have hash collisions
+        message1 = "Hello World"
+        message2 = "Hello World!"
+ 
+        env.set_translation_version(message1, "1.0")
+        env.set_translation_version(message2, "2.0")
+ 
+        assert env.get_translation_version(message1) == "1.0"
+        assert env.get_translation_version(message2) == "2.0"
+
+    def test_translation_version_control_flag(self):
+        """Test that translation_version_control flag is set."""
+        env = Environment(extensions=["jinja2.ext.i18n"])
+        assert hasattr(env, 'translation_version_control')
+        assert env.translation_version_control is True
+
+
 class TestNewstyleInternationalization:
     def test_trans(self):
         tmpl = newstyle_i18n_env.get_template("child.html")

