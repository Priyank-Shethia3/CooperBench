diff --git a/src/jinja2/filters.py b/src/jinja2/filters.py
index 80ea6504..cdb410b9 100644
--- a/src/jinja2/filters.py
+++ b/src/jinja2/filters.py
@@ -1163,12 +1163,16 @@ def sync_do_groupby(
     value: "t.Iterable[V]",
     attribute: t.Union[str, int],
     default: t.Optional[t.Any] = None,
+    stable: bool = False,
 ) -> "t.List[t.Tuple[t.Any, t.List[V]]]":
     """Group a sequence of objects by an attribute using Python's
     :func:`itertools.groupby`. The attribute can use dot notation for
-    nested access, like ``"address.city"``. Unlike Python's ``groupby``,
-    the values are sorted first so only one group is returned for each
-    unique value.
+    nested access, like ``"address.city"``.
+
+    Unlike Python's ``groupby``, the values are sorted first so only one
+    group is returned for each unique value. When ``stable=True``, the
+    original order of items within each group is preserved and groups are
+    returned in the order their keys are first seen in the input.
 
     For example, a list of ``User`` objects with a ``city`` attribute
     can be rendered in groups. In this example, ``grouper`` refers to
@@ -1206,14 +1210,29 @@ def sync_do_groupby(
     .. versionchanged:: 3.0
         Added the ``default`` parameter.
 
+    .. versionchanged:: 3.1
+        Added the ``stable`` parameter to preserve item order within
+        groups and group order by first occurrence.
+
     .. versionchanged:: 2.6
         The attribute supports dot notation for nested access.
     """
     expr = make_attrgetter(environment, attribute, default=default)
-    return [
-        _GroupTuple(key, list(values))
-        for key, values in groupby(sorted(value, key=expr), expr)
-    ]
+
+    if not stable:
+        return [
+            _GroupTuple(key, list(values))
+            for key, values in groupby(sorted(value, key=expr), expr)
+        ]
+
+    # stable=True: preserve original input order within each group and
+    # order groups by first-seen key occurrence in the input
+    groups: t.Dict[t.Any, t.List[V]] = {}
+    for item in value:
+        key = expr(item)
+        groups.setdefault(key, []).append(item)
+
+    return [_GroupTuple(key, items) for key, items in groups.items()]
 
 
 @async_variant(sync_do_groupby)  # type: ignore
@@ -1222,12 +1241,25 @@ async def do_groupby(
     value: "t.Union[t.AsyncIterable[V], t.Iterable[V]]",
     attribute: t.Union[str, int],
     default: t.Optional[t.Any] = None,
+    stable: bool = False,
 ) -> "t.List[t.Tuple[t.Any, t.List[V]]]":
     expr = make_attrgetter(environment, attribute, default=default)
-    return [
-        _GroupTuple(key, await auto_to_list(values))
-        for key, values in groupby(sorted(await auto_to_list(value), key=expr), expr)
-    ]
+
+    if not stable:
+        return [
+            _GroupTuple(key, await auto_to_list(values))
+            for key, values in groupby(sorted(await auto_to_list(value), key=expr), expr)
+        ]
+
+    # stable=True: preserve original input order within each group and
+    # order groups by first-seen key occurrence in the input
+    seq = await auto_to_list(value)
+    groups: t.Dict[t.Any, t.List[V]] = {}
+    for item in seq:
+        key = expr(item)
+        groups.setdefault(key, []).append(item)
+
+    return [_GroupTuple(key, items) for key, items in groups.items()]
 
 
 @pass_environment
