diff --git a/tests/test_async_filters.py b/tests/test_async_filters.py
index 5d4f332e..0669f3c6 100644
--- a/tests/test_async_filters.py
+++ b/tests/test_async_filters.py
@@ -251,3 +251,214 @@ def test_custom_async_iteratable_filter(env_async, items):
     )
     out = tmpl.render(items=items)
     assert out == "0,1,2 .. 3,4,5"
+
+
+def make_users_for_filter():
+    return [
+        {"name": "alice", "city": "NY"},
+        {"name": "bob", "city": "NY"},
+        {"name": "charlie", "city": "LA"},
+        {"name": "david", "city": "SF"},
+        {"name": "eve", "city": "SF"},
+    ]
+
+
+@mark_dualiter("users", make_users_for_filter)
+def test_groupby_filter_groups_duplicates(env_async, users):
+    """Test filter_groups to find duplicates (groups with more than 1 item)."""
+
+    def filter_duplicates(group):
+        return len(group) > 1
+
+    tmpl = env_async.from_string(
+        "{% for city, items in users()|groupby('city', filter_groups=filter_func) %}"
+        "{{ city }}: {{ items|map(attribute='name')|join(', ') }}\n"
+        "{% endfor %}"
+    )
+    out = tmpl.render(users=users, filter_func=filter_duplicates)
+    assert out == "NY: alice, bob\nSF: david, eve\n"
+
+
+@mark_dualiter("users", make_users_for_filter)
+def test_groupby_filter_groups_unique(env_async, users):
+    """Test filter_groups to find unique items (groups with exactly 1 item)."""
+
+    def filter_unique(group):
+        return len(group) == 1
+
+    tmpl = env_async.from_string(
+        "{% for city, items in users()|groupby('city', filter_groups=filter_func) %}"
+        "{{ city }}: {{ items|map(attribute='name')|join(', ') }}\n"
+        "{% endfor %}"
+    )
+    out = tmpl.render(users=users, filter_func=filter_unique)
+    assert out == "LA: charlie\n"
+
+
+def make_users_for_empty_filter():
+    return [
+        {"name": "alice", "city": "NY"},
+        {"name": "bob", "city": "LA"},
+    ]
+
+
+@mark_dualiter("users", make_users_for_empty_filter)
+def test_groupby_filter_groups_empty_result(env_async, users):
+    """Test filter_groups that filters out all groups."""
+
+    def filter_large_groups(group):
+        return len(group) > 10
+
+    tmpl = env_async.from_string(
+        "{% for city, items in users()|groupby('city', filter_groups=filter_func) %}"
+        "{{ city }}: {{ items|map(attribute='name')|join(', ') }}\n"
+        "{% endfor %}"
+    )
+    out = tmpl.render(users=users, filter_func=filter_large_groups)
+    assert out == ""
+
+
+@mark_dualiter("users", make_users_for_empty_filter)
+def test_groupby_filter_groups_all_pass(env_async, users):
+    """Test filter_groups that allows all groups to pass."""
+
+    def filter_all_pass(group):
+        return True
+
+    tmpl = env_async.from_string(
+        "{% for city, items in users()|groupby('city', filter_groups=filter_func) %}"
+        "{{ city }}: {{ items|map(attribute='name')|join(', ') }}\n"
+        "{% endfor %}"
+    )
+    out = tmpl.render(users=users, filter_func=filter_all_pass)
+    assert out == "LA: bob\nNY: alice\n"
+
+
+def make_users_with_missing_city():
+    return [
+        {"name": "alice", "city": "NY"},
+        {"name": "bob", "city": "NY"},
+        {"name": "charlie"},
+        {"name": "david"},
+    ]
+
+
+@mark_dualiter("users", make_users_with_missing_city)
+def test_groupby_filter_groups_with_default(env_async, users):
+    """Test filter_groups combined with default parameter."""
+
+    def filter_duplicates(group):
+        return len(group) > 1
+
+    tmpl = env_async.from_string(
+        "{% for city, items in users()|groupby('city', default='Unknown', filter_groups=filter_func) %}"
+        "{{ city }}: {{ items|map(attribute='name')|join(', ') }}\n"
+        "{% endfor %}"
+    )
+    out = tmpl.render(users=users, filter_func=filter_duplicates)
+    assert out == "NY: alice, bob\nUnknown: charlie, david\n"
+
+
+@mark_dualiter("users", make_users_for_empty_filter)
+def test_groupby_filter_groups_none(env_async, users):
+    """Test that filter_groups=None behaves like normal groupby."""
+    tmpl = env_async.from_string(
+        "{% for city, items in users()|groupby('city', filter_groups=none) %}"
+        "{{ city }}: {{ items|map(attribute='name')|join(', ') }}\n"
+        "{% endfor %}"
+    )
+    out = tmpl.render(users=users)
+    assert out == "LA: bob\nNY: alice\n"
+
+
+@mark_dualiter("users", make_users_for_filter)
+def test_groupby_filter_groups_lambda_duplicates(env_async, users):
+    """Test filter_groups with lambda function for duplicates in async environment."""
+    tmpl = env_async.from_string(
+        "{% for city, items in users()|groupby('city', filter_groups=lambda_func) %}"
+        "{{ city }}: {{ items|map(attribute='name')|join(', ') }}\n"
+        "{% endfor %}"
+    )
+    out = tmpl.render(users=users, lambda_func=lambda group: len(group) > 1)
+    assert out == "NY: alice, bob\nSF: david, eve\n"
+
+
+@mark_dualiter("users", make_users_for_filter)
+def test_groupby_filter_groups_lambda_unique(env_async, users):
+    """Test filter_groups with lambda function for unique items in async environment."""
+    tmpl = env_async.from_string(
+        "{% for city, items in users()|groupby('city', filter_groups=lambda_func) %}"
+        "{{ city }}: {{ items|map(attribute='name')|join(', ') }}\n"
+        "{% endfor %}"
+    )
+    out = tmpl.render(users=users, lambda_func=lambda group: len(group) == 1)
+    assert out == "LA: charlie\n"
+
+
+def make_students_for_complex_filter():
+    return [
+        {"name": "alice", "score": 95},
+        {"name": "bob", "score": 95},
+        {"name": "charlie", "score": 75},
+        {"name": "david", "score": 75},
+        {"name": "eve", "score": 85},
+        {"name": "frank", "score": 85},
+        {"name": "grace", "score": 85},
+    ]
+
+
+@mark_dualiter("students", make_students_for_complex_filter)
+def test_groupby_filter_groups_lambda_complex(env_async, students):
+    """Test filter_groups with complex lambda condition in async environment."""
+    tmpl = env_async.from_string(
+        "{% for score, items in students()|groupby('score', filter_groups=lambda_func) %}"
+        "Score {{ score }}: {{ items|map(attribute='name')|join(', ') }}\n"
+        "{% endfor %}"
+    )
+    out = tmpl.render(
+        students=students,
+        lambda_func=lambda group: len(group) >= 2 and group[0]["score"] >= 80,
+    )
+    assert out == "Score 85: eve, frank, grace\nScore 95: alice, bob\n"
+
+
+@mark_dualiter("users", make_users_for_filter)
+def test_groupby_filter_groups_lambda_from_globals(env_async, users):
+    """Test filter_groups with lambda function from environment globals in async environment."""
+    env_async.globals['only_dupes'] = lambda g: len(g) > 1
+    env_async.globals['only_singles'] = lambda g: len(g) == 1
+ 
+    # Test duplicates from globals
+    tmpl = env_async.from_string(
+        "{% for city, items in users()|groupby('city', filter_groups=only_dupes) %}"
+        "{{ city }}: {{ items|map(attribute='name')|join(', ') }}\n"
+        "{% endfor %}"
+    )
+    out = tmpl.render(users=users)
+    assert out == "NY: alice, bob\nSF: david, eve\n"
+ 
+    # Test singles from globals
+    tmpl = env_async.from_string(
+        "{% for city, items in users()|groupby('city', filter_groups=only_singles) %}"
+        "{{ city }}: {{ items|map(attribute='name')|join(', ') }}\n"
+        "{% endfor %}"
+    )
+    out = tmpl.render(users=users)
+    assert out == "LA: charlie\n"
+
+
+@mark_dualiter("users", make_users_for_empty_filter)
+def test_groupby_filter_groups_lambda_edge_cases(env_async, users):
+    """Test filter_groups lambda edge cases in async environment (filter all, allow all)."""
+    # Lambda that filters everything
+    tmpl = env_async.from_string(
+        "{% for city, items in users()|groupby('city', filter_groups=lambda_func) %}"
+        "{{ city }}: {{ items|map(attribute='name')|join(', ') }}\n"
+        "{% endfor %}"
+    )
+    out = tmpl.render(users=users, lambda_func=lambda group: False)
+    assert out == ""
+ 
+    # Lambda that allows everything
+    out = tmpl.render(users=users, lambda_func=lambda group: True)
+    assert out == "LA: bob\nNY: alice\n"
diff --git a/tests/test_filters.py b/tests/test_filters.py
index 43ddf59c..c877d8b8 100644
--- a/tests/test_filters.py
+++ b/tests/test_filters.py
@@ -619,6 +619,264 @@ class TestFilter:
         )
         assert out == "NY: emma, john\nWA: smith\n"
 
+    def test_groupby_filter_groups_duplicates(self, env):
+        """Test filter_groups to find duplicates (groups with more than 1 item)."""
+
+        def filter_duplicates(group):
+            return len(group) > 1
+
+        tmpl = env.from_string(
+            "{% for city, items in users|groupby('city', filter_groups=filter_func) %}"
+            "{{ city }}: {{ items|map(attribute='name')|join(', ') }}\n"
+            "{% endfor %}"
+        )
+        out = tmpl.render(
+            users=[
+                {"name": "alice", "city": "NY"},
+                {"name": "bob", "city": "NY"},
+                {"name": "charlie", "city": "LA"},
+                {"name": "david", "city": "SF"},
+                {"name": "eve", "city": "SF"},
+            ],
+            filter_func=filter_duplicates,
+        )
+        assert out == "NY: alice, bob\nSF: david, eve\n"
+
+    def test_groupby_filter_groups_unique(self, env):
+        """Test filter_groups to find unique items (groups with exactly 1 item)."""
+
+        def filter_unique(group):
+            return len(group) == 1
+
+        tmpl = env.from_string(
+            "{% for city, items in users|groupby('city', filter_groups=filter_func) %}"
+            "{{ city }}: {{ items|map(attribute='name')|join(', ') }}\n"
+            "{% endfor %}"
+        )
+        out = tmpl.render(
+            users=[
+                {"name": "alice", "city": "NY"},
+                {"name": "bob", "city": "NY"},
+                {"name": "charlie", "city": "LA"},
+                {"name": "david", "city": "SF"},
+                {"name": "eve", "city": "SF"},
+            ],
+            filter_func=filter_unique,
+        )
+        assert out == "LA: charlie\n"
+
+    def test_groupby_filter_groups_empty_result(self, env):
+        """Test filter_groups that filters out all groups."""
+
+        def filter_large_groups(group):
+            return len(group) > 10
+
+        tmpl = env.from_string(
+            "{% for city, items in users|groupby('city', filter_groups=filter_func) %}"
+            "{{ city }}: {{ items|map(attribute='name')|join(', ') }}\n"
+            "{% endfor %}"
+        )
+        out = tmpl.render(
+            users=[
+                {"name": "alice", "city": "NY"},
+                {"name": "bob", "city": "LA"},
+            ],
+            filter_func=filter_large_groups,
+        )
+        assert out == ""
+
+    def test_groupby_filter_groups_all_pass(self, env):
+        """Test filter_groups that allows all groups to pass."""
+
+        def filter_all_pass(group):
+            return True
+
+        tmpl = env.from_string(
+            "{% for city, items in users|groupby('city', filter_groups=filter_func) %}"
+            "{{ city }}: {{ items|map(attribute='name')|join(', ') }}\n"
+            "{% endfor %}"
+        )
+        out = tmpl.render(
+            users=[
+                {"name": "alice", "city": "NY"},
+                {"name": "bob", "city": "LA"},
+            ],
+            filter_func=filter_all_pass,
+        )
+        assert out == "LA: bob\nNY: alice\n"
+
+    def test_groupby_filter_groups_with_default(self, env):
+        """Test filter_groups combined with default parameter."""
+
+        def filter_duplicates(group):
+            return len(group) > 1
+
+        tmpl = env.from_string(
+            "{% for city, items in users|groupby('city', default='Unknown', filter_groups=filter_func) %}"
+            "{{ city }}: {{ items|map(attribute='name')|join(', ') }}\n"
+            "{% endfor %}"
+        )
+        out = tmpl.render(
+            users=[
+                {"name": "alice", "city": "NY"},
+                {"name": "bob", "city": "NY"},
+                {"name": "charlie"},
+                {"name": "david"},
+            ],
+            filter_func=filter_duplicates,
+        )
+        assert out == "NY: alice, bob\nUnknown: charlie, david\n"
+
+    def test_groupby_filter_groups_complex_condition(self, env):
+        """Test filter_groups with complex filtering condition."""
+
+        def filter_high_scoring_groups(group):
+            return len(group) >= 2 and group[0]["score"] >= 80
+
+        tmpl = env.from_string(
+            "{% for score, items in students|groupby('score', filter_groups=filter_func) %}"
+            "Score {{ score }}: {{ items|map(attribute='name')|join(', ') }}\n"
+            "{% endfor %}"
+        )
+        out = tmpl.render(
+            students=[
+                {"name": "alice", "score": 95},
+                {"name": "bob", "score": 95},
+                {"name": "charlie", "score": 75},
+                {"name": "david", "score": 75},
+                {"name": "eve", "score": 85},
+                {"name": "frank", "score": 85},
+                {"name": "grace", "score": 85},
+            ],
+            filter_func=filter_high_scoring_groups,
+        )
+        assert out == "Score 85: eve, frank, grace\nScore 95: alice, bob\n"
+
+    def test_groupby_filter_groups_none(self, env):
+        """Test that filter_groups=None behaves like normal groupby."""
+        tmpl = env.from_string(
+            "{% for city, items in users|groupby('city', filter_groups=none) %}"
+            "{{ city }}: {{ items|map(attribute='name')|join(', ') }}\n"
+            "{% endfor %}"
+        )
+        out = tmpl.render(
+            users=[
+                {"name": "alice", "city": "NY"},
+                {"name": "bob", "city": "LA"},
+            ]
+        )
+        assert out == "LA: bob\nNY: alice\n"
+
+    def test_groupby_filter_groups_lambda_duplicates(self, env):
+        """Test filter_groups with lambda function for duplicates."""
+        tmpl = env.from_string(
+            "{% for city, items in users|groupby('city', filter_groups=lambda_func) %}"
+            "{{ city }}: {{ items|map(attribute='name')|join(', ') }}\n"
+            "{% endfor %}"
+        )
+        out = tmpl.render(
+            users=[
+                {"name": "alice", "city": "NY"},
+                {"name": "bob", "city": "NY"},
+                {"name": "charlie", "city": "LA"},
+                {"name": "david", "city": "SF"},
+                {"name": "eve", "city": "SF"},
+            ],
+            lambda_func=lambda group: len(group) > 1,
+        )
+        assert out == "NY: alice, bob\nSF: david, eve\n"
+
+    def test_groupby_filter_groups_lambda_unique(self, env):
+        """Test filter_groups with lambda function for unique items."""
+        tmpl = env.from_string(
+            "{% for city, items in users|groupby('city', filter_groups=lambda_func) %}"
+            "{{ city }}: {{ items|map(attribute='name')|join(', ') }}\n"
+            "{% endfor %}"
+        )
+        out = tmpl.render(
+            users=[
+                {"name": "alice", "city": "NY"},
+                {"name": "bob", "city": "NY"},
+                {"name": "charlie", "city": "LA"},
+                {"name": "david", "city": "SF"},
+                {"name": "eve", "city": "SF"},
+            ],
+            lambda_func=lambda group: len(group) == 1,
+        )
+        assert out == "LA: charlie\n"
+
+    def test_groupby_filter_groups_lambda_complex(self, env):
+        """Test filter_groups with complex lambda condition."""
+        tmpl = env.from_string(
+            "{% for score, items in students|groupby('score', filter_groups=lambda_func) %}"
+            "Score {{ score }}: {{ items|map(attribute='name')|join(', ') }}\n"
+            "{% endfor %}"
+        )
+        out = tmpl.render(
+            students=[
+                {"name": "alice", "score": 95},
+                {"name": "bob", "score": 95},
+                {"name": "charlie", "score": 75},
+                {"name": "david", "score": 75},
+                {"name": "eve", "score": 85},
+                {"name": "frank", "score": 85},
+                {"name": "grace", "score": 85},
+            ],
+            lambda_func=lambda group: len(group) >= 2 and group[0]["score"] >= 80,
+        )
+        assert out == "Score 85: eve, frank, grace\nScore 95: alice, bob\n"
+
+    def test_groupby_filter_groups_lambda_from_globals(self, env):
+        """Test filter_groups with lambda function from environment globals."""
+        env.globals['only_dupes'] = lambda g: len(g) > 1
+        env.globals['only_singles'] = lambda g: len(g) == 1
+ 
+        users = [
+            {"name": "alice", "city": "NY"},
+            {"name": "bob", "city": "NY"},
+            {"name": "charlie", "city": "LA"},
+            {"name": "david", "city": "SF"},
+            {"name": "eve", "city": "SF"},
+        ]
+ 
+        # Test duplicates from globals
+        tmpl = env.from_string(
+            "{% for city, items in users|groupby('city', filter_groups=only_dupes) %}"
+            "{{ city }}: {{ items|map(attribute='name')|join(', ') }}\n"
+            "{% endfor %}"
+        )
+        out = tmpl.render(users=users)
+        assert out == "NY: alice, bob\nSF: david, eve\n"
+ 
+        # Test singles from globals
+        tmpl = env.from_string(
+            "{% for city, items in users|groupby('city', filter_groups=only_singles) %}"
+            "{{ city }}: {{ items|map(attribute='name')|join(', ') }}\n"
+            "{% endfor %}"
+        )
+        out = tmpl.render(users=users)
+        assert out == "LA: charlie\n"
+
+    def test_groupby_filter_groups_lambda_edge_cases(self, env):
+        """Test filter_groups lambda edge cases (filter all, allow all)."""
+        users = [
+            {"name": "alice", "city": "NY"},
+            {"name": "bob", "city": "LA"},
+        ]
+ 
+        # Lambda that filters everything
+        tmpl = env.from_string(
+            "{% for city, items in users|groupby('city', filter_groups=lambda_func) %}"
+            "{{ city }}: {{ items|map(attribute='name')|join(', ') }}\n"
+            "{% endfor %}"
+        )
+        out = tmpl.render(users=users, lambda_func=lambda group: False)
+        assert out == ""
+ 
+        # Lambda that allows everything
+        out = tmpl.render(users=users, lambda_func=lambda group: True)
+        assert out == "LA: bob\nNY: alice\n"
+
     def test_filtertag(self, env):
         tmpl = env.from_string(
             "{% filter upper|replace('FOO', 'foo') %}foobar{% endfilter %}"
